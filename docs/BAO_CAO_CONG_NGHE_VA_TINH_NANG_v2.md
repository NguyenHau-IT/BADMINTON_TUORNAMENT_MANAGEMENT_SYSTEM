# ğŸ“Š BÃO CÃO CÃ”NG NGHá»† VÃ€ TÃNH NÄ‚NG Â· v2.1

Há»‡ thá»‘ng Quáº£n lÃ½ Giáº£i Ä‘áº¥u Cáº§u lÃ´ng (Badminton Tournament Management System Â· BTMS)

> **ğŸ“… Cáº­p nháº­t**: November 28, 2025  
> **ğŸ—ï¸ Kiáº¿n trÃºc**: Hybrid Desktop + Web Application  
> **ğŸ¯ Pháº¡m vi**: Professional Tournament Management vá»›i Multi-court Support

> **Cáº­p nháº­t láº§n cuá»‘i:** 26/11/2025  
> **PhiÃªn báº£n tÃ i liá»‡u:** 2.1.0

---

## ğŸ“‘ Má»¥c lá»¥c

### ğŸ¯ Tá»”NG QUAN Há»† THá»NG
- [ğŸ“‹ ThÃ´ng tin tá»•ng quan](#-thÃ´ng-tin-tá»•ng-quan)
- [ğŸ¯ Má»¥c tiÃªu & pháº¡m vi](#-má»¥c-tiÃªu--pháº¡m-vi)
- [ğŸŒŸ TÃ­nh nÄƒng ná»•i báº­t](#-tÃ­nh-nÄƒng-ná»•i-báº­t)

### ğŸ—ï¸ KIáº¾N TRÃšC & CÃ”NG NGHá»†  
- [ğŸ—ï¸ Kiáº¿n trÃºc há»‡ thá»‘ng](#ï¸-kiáº¿n-trÃºc-há»‡-thá»‘ng)
- [ğŸ’» CÃ´ng nghá»‡ chÃ­nh (Tech stack)](#-cÃ´ng-nghá»‡-chÃ­nh-tech-stack)
- [âš™ï¸ Cáº¥u hÃ¬nh máº·c Ä‘á»‹nh quan trá»ng](#ï¸-cáº¥u-hÃ¬nh-máº·c-Ä‘á»‹nh-quan-trá»ng)
- [ğŸ”— MÃ´ hÃ¬nh dá»¯ liá»‡u](#-mÃ´-hÃ¬nh-dá»¯-liá»‡u)

### ğŸš€ TÃNH NÄ‚NG HIá»†N Táº I
- [ğŸ§­ Äiá»u hÆ°á»›ng & mÃ n hÃ¬nh chÃ­nh (Desktop)](#-Ä‘iá»u-hÆ°á»›ng--mÃ n-hÃ¬nh-chÃ­nh-desktop)
- [ğŸŸï¸ Quáº£n lÃ½ Ä‘a sÃ¢n & Ä‘iá»u khiá»ƒn tráº­n Ä‘áº¥u](#ï¸-quáº£n-lÃ½-Ä‘a-sÃ¢n--Ä‘iá»u-khiá»ƒn-tráº­n-Ä‘áº¥u)
- [ğŸŒ Web Platform (Tournament Hub)](#-web-platform-tournament-hub)
- [ğŸ”Œ REST API & SSE](#-rest-api--sse)
- [ğŸ—ƒï¸ CÃ¡c mÃ´-Ä‘un dá»¯ liá»‡u/ghi nháº­t kÃ½](#ï¸-cÃ¡c-mÃ´-Ä‘un-dá»¯-liá»‡ughi-nháº­t-kÃ½-trÃ­ch-yáº¿u)

### ğŸ”® Káº¾ HOáº CH TÆ¯Æ NG LAI
- [ğŸ”® PhÃ¡t tháº£o tÃ­nh nÄƒng dá»± kiáº¿n](#-phÃ¡t-tháº£o-tÃ­nh-nÄƒng-dá»±-kiáº¿n)
- [ğŸ”„ Luá»“ng hoáº¡t Ä‘á»™ng sÆ¡ bá»™](#-luá»“ng-hoáº¡t-Ä‘á»™ng-sÆ¡-bá»™)

### ğŸ”§ Váº¬N HÃ€NH & Báº¢O TRÃŒ
- [ğŸ§ª Kiá»ƒm thá»­ & giÃ¡m sÃ¡t](#-kiá»ƒm-thá»­--giÃ¡m-sÃ¡t)
- [ğŸ”’ Báº£o máº­t & quyá»n truy cáº­p](#-báº£o-máº­t--quyá»n-truy-cáº­p)
- [âš¡ Hiá»‡u nÄƒng & tá»‘i Æ°u](#-hiá»‡u-nÄƒng--tá»‘i-Æ°u)
- [ğŸ“¦ ÄÃ³ng gÃ³i & cÃ i Ä‘áº·t (Windows MSI)](#-Ä‘Ã³ng-gÃ³i--cÃ i-Ä‘áº·t-windows-msi)
- [ğŸ§­ HÆ°á»›ng dáº«n váº­n hÃ nh nhanh](#-hÆ°á»›ng-dáº«n-váº­n-hÃ nh-nhanh)

---

## ğŸ¯ Tá»”NG QUAN Há»† THá»NG

### ğŸ“‹ ThÃ´ng tin tá»•ng quan
- **TÃªn dá»± Ã¡n**: Badminton Tournament Management System (BTMS)
- **PhiÃªn báº£n hiá»‡n táº¡i**: 1.0.0 (Enhanced with Web Platform Integration)
- **NhÃ  phÃ¡t triá»ƒn**: Nguyen Viet Hau (@NguyenHau-IT)
- **Kiá»ƒu á»©ng dá»¥ng**: Hybrid Desktop (Java Swing) + Web Platform (Spring Boot + Thymeleaf)
- **Há»‡ Ä‘iá»u hÃ nh má»¥c tiÃªu**: Windows 10/11 64-bit
- **Cá»•ng dá»‹ch vá»¥ máº·c Ä‘á»‹nh**: 2345 (0.0.0.0:2345)
- **Repository**: GitHub - NguyenHau-IT/Badminton_Tournament_Management_System_DB_SQLSRV
- **License**: MIT License

### ğŸ¯ Má»¥c tiÃªu & pháº¡m vi
- **ğŸŸï¸ Multi-court Management**: Váº­n hÃ nh giáº£i cáº§u lÃ´ng vá»›i **5 sÃ¢n** thi Ä‘áº¥u Ä‘á»“ng thá»i trÃªn cÃ¹ng 1 mÃ¡y.
- **ğŸ“± Remote Control**: Äiá»u khiá»ƒn tráº­n Ä‘áº¥u tá»« desktop app + há»— trá»£ Ä‘iá»u khiá»ƒn tá»« xa qua trÃ¬nh duyá»‡t (mobile/tablet/PC) báº±ng **mÃ£ PIN 4 chá»¯ sá»‘**.
- **âš¡ Real-time Sync**: Theo dÃµi, giÃ¡m sÃ¡t, vÃ  Ä‘á»“ng bá»™ tráº¡ng thÃ¡i cÃ¡c sÃ¢n theo thá»i gian thá»±c vá»›i **Server-Sent Events (SSE)**.
- **ğŸ’¾ Tournament Data**: Quáº£n lÃ½ toÃ n diá»‡n dá»¯ liá»‡u giáº£i Ä‘áº¥u: tournaments, ná»™i dung thi Ä‘áº¥u, cÃ¢u láº¡c bá»™, váº­n Ä‘á»™ng viÃªn, Ä‘Äƒng kÃ½ theo giáº£i.
- **ğŸŒ H2 TCP Server**: Remote database access cho phÃ©p mÃ¡y khÃ¡c káº¿t ná»‘i vÃ  truy cáº­p dá»¯ liá»‡u qua máº¡ng.
- **ğŸ“¦ Professional Deployment**: ÄÃ³ng gÃ³i phÃ¡t hÃ nh dáº¡ng **Windows MSI Installer** vá»›i JRE bundled Ä‘á»ƒ dá»… dÃ ng triá»ƒn khai.

### ğŸŒŸ TÃ­nh nÄƒng ná»•i báº­t

#### ğŸš€ **Hybrid Architecture Innovation**
- **Desktop + Web trong cÃ¹ng 1 JVM**: Kiáº¿n trÃºc Ä‘á»™c Ä‘Ã¡o káº¿t há»£p Swing UI vÃ  Spring Boot Web
- **Non-headless Mode**: `spring.main.headless=false` Ä‘á»ƒ há»— trá»£ desktop GUI
- **Shared Business Logic**: CÃ¹ng má»™t business layer phá»¥c vá»¥ cáº£ desktop vÃ  web interface

#### ğŸŸï¸ **Advanced Multi-Court System**  
- **Concurrent Court Management**: Há»— trá»£ 5 sÃ¢n Ä‘á»“ng thá»i vá»›i **thread-safe operations**
- **PIN-based Access**: Má»—i sÃ¢n cÃ³ mÃ£ PIN 4 chá»¯ sá»‘ unique cho remote access
- **Match Types**: Singles/Doubles vá»›i Best-of-1 hoáº·c Best-of-3 configuration
- **Real-time Broadcasting**: UDP Multicast (239.255.50.50:50505) cho monitoring

#### ğŸŒ **Network & Connectivity**
- **IPv4-only Filtering**: Chá»‰ cháº¥p nháº­n IPv4 interfaces, loáº¡i bá» IPv6 conflicts
- **Network Interface Selector**: Dialog chá»n interface khi khá»Ÿi Ä‘á»™ng
- **H2 TCP Server Integration**: Remote database access trÃªn port 9092
- **Cross-machine Database Access**: Cho phÃ©p mÃ¡y khÃ¡c káº¿t ná»‘i H2 database

#### ğŸ“± **Mobile-First Web Interface**
- **Responsive Design**: Bootstrap 5.3.3 vá»›i mobile-optimized controls
- **QR Code Integration**: ZXing library cho quick access
- **Touch-friendly Controls**: Large buttons vÃ  touch gestures
- **Progressive Web App Ready**: Offline capability vÃ  app-like experience

---

## ğŸ—ï¸ KIáº¾N TRÃšC & CÃ”NG NGHá»†

### ğŸ—ï¸ Kiáº¿n trÃºc há»‡ thá»‘ng

#### ğŸ¯ **Architectural Overview**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BTMS Application (JVM)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Java Swing Desktop UI (MainFrame, Control Panels)            â”‚
â”‚  â”œâ”€â”€ Multi-Court Control Panel (5 Courts Max)                 â”‚
â”‚  â”œâ”€â”€ Tournament Management (Tournaments, Clubs, Players)      â”‚
â”‚  â”œâ”€â”€ Monitor Tab (Real-time Court Monitoring)                 â”‚
â”‚  â””â”€â”€ System Tray Integration                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              Spring Boot Core (Non-headless)                   â”‚
â”‚  â”œâ”€â”€ Web Controllers (Thymeleaf + REST API)                   â”‚
â”‚  â”œâ”€â”€ Business Services (Court, Tournament, Auth)              â”‚
â”‚  â”œâ”€â”€ JPA/Hibernate Data Layer                                 â”‚
â”‚  â””â”€â”€ SSE Broadcasting + Threading Management                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Network Layer                               â”‚
â”‚  â”œâ”€â”€ H2 TCP Server (Port 9092) - Remote DB Access            â”‚
â”‚  â”œâ”€â”€ Web Server (Port 2345) - Mobile/Web Interface           â”‚
â”‚  â”œâ”€â”€ UDP Multicast (239.255.50.50:50505) - Broadcasting      â”‚
â”‚  â””â”€â”€ IPv4-only Network Filtering                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   Data Persistence                             â”‚
â”‚  â”œâ”€â”€ SQL Server (Primary Database)                            â”‚
â”‚  â”œâ”€â”€ H2 In-memory (TCP accessible)                            â”‚
â”‚  â””â”€â”€ Local File Storage (Screenshots, Exports)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

External Connections:
ğŸ“± Mobile/Tablet Browser â†’ Web Interface (PIN-based)
ğŸ–¥ï¸  Remote H2 Clients   â†’ H2 TCP Server
ğŸ“º Display Screens      â†’ UDP Multicast Stream
```

#### ğŸ”„ **Data Flow Architecture**
```mermaid
graph TB
    subgraph "Client Devices"
        A[Desktop Admin UI]
        B[Mobile Browser]
        C[Tablet Browser] 
        D[Remote H2 Client]
    end
    
    subgraph "BTMS Application"
        E[Spring Boot Core]
        F[Swing UI Layer]
        G[Web Controllers]
        H[SSE Broadcasting]
        I[H2 TCP Server]
    end
    
    subgraph "Data Layer"
        J[SQL Server]
        K[H2 Memory DB]
        L[File System]
    end
    
    A <--> F
    F <--> E
    B --> G
    C --> G
    G <--> E
    E --> H
    H --> B
    H --> C
    D <--> I
    E <--> J
    E <--> K
    I <--> K
    E --> L
```

#### ğŸ’« **Enhanced Threading Model (Java 21)**
- **Per-Court Serial Executors**: Má»—i sÃ¢n cÃ³ `SerialExecutor` riÃªng Ä‘áº£m báº£o thread-safety
- **Virtual Threads Backing**: Java 21 virtual threads cho optimal scalability
- **Lock-free Operations**: Concurrent collections vÃ  atomic operations
- **SSE Async Processing**: Non-blocking event broadcasting vá»›i retry logic

### ğŸ’» CÃ´ng nghá»‡ chÃ­nh (Tech stack)

#### ğŸš€ **Runtime & Core Platform**
| CÃ´ng nghá»‡ | PhiÃªn báº£n | Má»¥c Ä‘Ã­ch | TÃ­nh nÄƒng ná»•i báº­t |
|-----------|-----------|----------|------------------|
| **Java** | 21 LTS | Runtime platform | Virtual threads, enhanced threading, pattern matching |
| **Spring Boot** | 3.4.0 | Application framework | Auto-configuration, embedded server, production-ready features |
| **Maven** | 3.8+ | Build & dependency management | jpackage integration, multi-profile builds |

#### ğŸ¨ **User Interface Technologies**
| Layer | CÃ´ng nghá»‡ | PhiÃªn báº£n | Má»¥c Ä‘Ã­ch |
|-------|-----------|-----------|----------|
| **Desktop UI** | Java Swing | Built-in | Native desktop interface |
| | FlatLaf | 3.4 | Modern Look & Feel vá»›i dark/light themes |
| | FlatLaf Extras | 3.4 | Advanced UI components vÃ  icons |
| **Web UI** | Thymeleaf | 3.1.x | Server-side template engine |
| | Thymeleaf Layout Dialect | 3.3.x | Layout decorators vÃ  template inheritance |
| | Bootstrap | 5.3.3 | Responsive CSS framework |
| | jQuery | 3.7.1 | JavaScript library cho DOM manipulation |

#### ğŸŒ **Web & API Technologies**
| CÃ´ng nghá»‡ | PhiÃªn báº£n | Má»¥c Ä‘Ã­ch | Implementation |
|-----------|-----------|----------|----------------|
| **Spring Web MVC** | 6.1.x | Web framework | REST controllers, view resolvers |
| **Server-Sent Events** | Native | Real-time communication | SseEmitter vá»›i async processing |
| **JSON Processing** | Jackson 2.15+ | Data serialization | ObjectMapper vá»›i caching |
| **Cross-Origin Support** | Spring CORS | API accessibility | Configurable CORS policies |

#### ğŸ—„ï¸ **Database & Persistence**
| CÃ´ng nghá»‡ | PhiÃªn báº£n | Má»¥c Ä‘Ã­ch | Configuration |
|-----------|-----------|----------|---------------|
| **SQL Server** | 2019+ | Primary database | Production data storage |
| **MS SQL JDBC Driver** | 12.6.1+ | Database connectivity | SSL support, connection pooling |
| **H2 Database** | 2.3.232 | TCP server & testing | Remote access via port 9092 |
| **Spring Data JPA** | 3.2.x | Data access layer | Repository pattern, automatic queries |
| **Hibernate** | 6.4.x | ORM implementation | Entity mapping, lazy loading |
| **HikariCP** | 5.1.x | Connection pooling | High-performance connection pool |

#### ğŸ› ï¸ **Utilities & Libraries**
| CÃ´ng nghá»‡ | PhiÃªn báº£n | Má»¥c Ä‘Ã­ch |
|-----------|-----------|----------|
| **ZXing** | 3.5.2 | QR Code generation vÃ  scanning |
| **OkHttp** | 4.12.0 | HTTP client vá»›i SSE support |
| **OkHttp SSE** | 4.12.0 | Server-Sent Events client library |
| **JCalendar** | 1.4 | Date picker component |
| **OpenPDF** | 1.3.39 | PDF generation vÃ  export |
| **Jackson Databind** | 2.15+ | JSON/XML data binding |

#### ğŸ”§ **Development & Testing**
| CÃ´ng nghá»‡ | PhiÃªn báº£n | Má»¥c Ä‘Ã­ch |
|-----------|-----------|----------|
| **Maven Compiler Plugin** | 3.11.0 | Java compilation vá»›i release flag |
| **Spring Boot Maven Plugin** | 3.4.0 | Fat-jar packaging vÃ  repackaging |
| **JPackage Maven Plugin** | 1.6.6 | Native installer generation |
| **Spring Boot Test** | 3.4.0 | Integration testing |
| **JUnit** | 5.10+ | Unit testing framework |

#### ğŸ“¦ **Packaging & Distribution**
| CÃ´ng nghá»‡ | Platform | Output | Features |
|-----------|----------|--------|----------|
| **jpackage** | Windows | MSI Installer | JRE bundling, native integration |
| **Windows MSI** | Windows 10/11 | Native installer | Desktop shortcuts, start menu |
| **Java Fat JAR** | Cross-platform | Executable JAR | Self-contained application |

#### ğŸŒ **Network & Communication**
| Protocol/Tech | Port | Purpose | Implementation |
|---------------|------|---------|----------------|
| **HTTP/HTTPS** | 2345 | Web interface & REST API | Embedded Tomcat server |
| **H2 TCP** | 9092 | Remote database access | H2 TCP server |
| **UDP Multicast** | 50505 | Court monitoring broadcast | Custom ScoreboardBroadcaster |
| **Server-Sent Events** | 2345 | Real-time updates | Spring SseEmitter |

#### ğŸ”’ **Security & Authentication**
| Feature | Implementation | Purpose |
|---------|----------------|---------|
| **PIN Authentication** | 4-digit numeric codes | Court access control |
| **Input Validation** | Spring Validation | SQL injection prevention |
| **CORS Support** | Spring Security | Cross-origin API access |
| **Network Filtering** | IPv4-only interfaces | Security through network isolation |

### âš™ï¸ Cáº¥u hÃ¬nh máº·c Ä‘á»‹nh quan trá»ng

#### ğŸ—„ï¸ **Database Configuration (application.properties)**
```properties
# Server Configuration
server.address=0.0.0.0
server.port=2345
spring.application.name=BadmintonEventTechnology
spring.main.headless=false

# SQL Server Database Configuration
spring.datasource.url=jdbc:sqlserver://localhost:1433;databaseName=badminton_tournament;encrypt=true;trustServerCertificate=true
spring.datasource.username=
spring.datasource.password=
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# HikariCP Connection Pool Settings (Optimized)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000
spring.datasource.hikari.connection-timeout=20000

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect
spring.jpa.properties.hibernate.format_sql=true

# Logging Configuration (Optimized for SSE)
logging.level.org.apache.coyote=WARN
logging.level.org.apache.catalina=WARN
logging.level.org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter=WARN
logging.level.org.apache.catalina.core.StandardWrapperValve=WARN
logging.level.org.apache.tomcat.util.net=WARN
logging.level.org.springframework.web.servlet.DispatcherServlet=WARN
```

#### ğŸŒ **H2 TCP Server Configuration**
| Setting | Value | Purpose |
|---------|-------|---------|
| **Default Port** | 9092 | Remote database access |
| **Bind Address** | 0.0.0.0 | All network interfaces |
| **Auto-start** | Enabled | Automatic startup with application |
| **Database URL** | `jdbc:h2:tcp://[IP]:9092/mem:btms` | Remote connection string |
| **Security** | Basic authentication (sa/empty) | Minimal security for internal use |

#### ğŸ“¡ **Network Interface Configuration**
| Feature | Implementation | Purpose |
|---------|----------------|---------|
| **IPv4-only Filtering** | Custom NetworkConfig | Security and compatibility |
| **Interface Selection Dialog** | NetworkChooserDialog | User-controlled network binding |
| **Auto-detection** | Network interface enumeration | Automatic valid interface discovery |
| **Fallback Strategy** | Localhost binding | Graceful degradation |

#### ğŸ“¦ **Maven Build Profiles**
```xml
<!-- Profile selection based on D: drive availability -->
<profiles>
    <!-- Default installation to D:\BTMS if D: drive exists -->
    <profile>
        <id>default-d</id>
        <activation>
            <file><exists>D:/</exists></file>
        </activation>
        <properties>
            <install.dir>D:\BTMS</install.dir>
        </properties>
    </profile>
    
    <!-- Fallback to C:\Program Files\BTMS if no D: drive -->
    <profile>
        <id>fallback-c</id>
        <activation>
            <file><missing>D:/</missing></file>
        </activation>
        <properties>
            <install.dir>C:\Program Files\BTMS</install.dir>
        </properties>
    </profile>
</profiles>
```

### ğŸ”— MÃ´ hÃ¬nh dá»¯ liá»‡u

#### ğŸ† **Core Tournament Entities**

##### **GiaiDau (Tournament Entity)**
```java
@Entity
@Table(name = "GIAI_DAU")
public class GiaiDau {
    // Original Desktop App Fields
    @Id @GeneratedValue private Integer id;
    private String tenGiai;           // Tournament name
    private LocalDate ngayBd;         // Start date
    private LocalDate ngayKt;         // End date
    private LocalDateTime ngayTao;    // Creation timestamp
    private LocalDateTime ngayCapNhat; // Last modified
    private Integer idUser;           // Creator user ID
    
    // Enhanced Web Platform Fields (Phase 1)
    private String moTa;              // Description (NVARCHAR(MAX))
    private String diaDiem;           // Venue location
    private String tinhThanh;         // City/Province
    private String quocGia;           // Country (default: VN)
    private String trangThai;         // Status: upcoming/registration/ongoing/completed/cancelled
    private Boolean noiBat;           // Featured tournament flag
    private String hinhAnh;           // Tournament image URL
    private String logo;              // Tournament logo URL
    
    // Registration Management
    private LocalDate ngayMoDangKi;   // Registration open date
    private LocalDate ngayDongDangKi; // Registration close date
    private Integer soLuongToiDa;     // Maximum participants
    private Integer soLuongDaDangKy;  // Current registration count
    private BigDecimal phiThamGia;    // Entry fee
    
    // Additional Information
    private String giaiThuong;        // Prize information
    private String dienThoai;         // Contact phone
    private String email;             // Contact email
    private String website;           // Tournament website
    private String capDo;             // Level: professional/amateur/youth
    private String theLoai;           // Type: open/invitational/league
    private String sanThiDau;         // Courts information
    private String quyDinh;           // Tournament rules
    
    // Analytics & Social Features
    private Integer luotXem;          // View count
    private BigDecimal danhGiaTb;     // Average rating
    private Integer tongDanhGia;      // Total ratings count
}
```

#### ğŸ‘¥ **User Management Entities**

##### **NguoiDung (User Entity)**
- User authentication and authorization
- Role-based permissions (ADMIN/CLIENT)
- Profile management
- Activity logging

##### **VanDongVien (Player Entity)**
- Player registration and profiles
- Performance statistics
- Club affiliations
- Tournament participation history

##### **CauLacBo (Club Entity)**
- Club information and management
- Member roster
- Tournament registrations
- Statistics and achievements

#### ğŸŸï¸ **Match & Court Entities**

##### **BadmintonMatch**
```java
public class BadmintonMatch {
    private String[] names;           // Player/team names [A, B]
    private String[] clubs;           // Club names [A, B]
    private int[] score;              // Current game score [A, B]
    private int[] games;              // Games won [A, B]
    private int gameNumber;           // Current game number (1-based)
    private int server;               // Current server (0=A, 1=B)
    private boolean doubles;          // Singles or Doubles match
    private boolean betweenGamesInterval; // Between games break
    private boolean changedEndsThisGame; // Changed ends in current game
    private boolean matchFinished;    // Match completion status
    private int bestOf;              // Best of X games (1 or 3)
    private long elapsedSec;         // Match duration in seconds
    private List<int[]> gameScores;  // Historical game scores
}
```

##### **CourtSession**
- Court configuration and state
- PIN generation and validation
- Match assignment and management
- Real-time synchronization

##### **ChiTietTranDau & ChiTietVan**
- Detailed match and game records
- Score progression tracking
- Timing and duration information
- Performance analytics data

#### ğŸ“Š **Tournament Content & Categories**

##### **NoiDungThiDau (Tournament Categories)**
- Event categories (Men's Singles, Women's Doubles, etc.)
- Age group classifications
- Skill level divisions
- Entry requirements and restrictions

##### **DangKyNoiDung (Category Registrations)**
- Player/team registrations for specific categories
- Entry validation and approval
- Payment and fee management
- Registration status tracking

#### ğŸ“ˆ **Analytics & Reporting Entities**

##### **KetQuaCaNhan & KetQuaDoi**
- Individual and team match results
- Statistical aggregations
- Performance metrics
- Historical comparisons

##### **TournamentGallery**
- Tournament photos and media
- Match highlights and recordings
- Social media integration
- Public galleries and showcases

#### ğŸ”„ **Entity Relationships**

```mermaid
erDiagram
    GIAI_DAU ||--o{ NOI_DUNG_THI_DAU : contains
    GIAI_DAU ||--o{ DANG_KI_NOI_DUNG : accepts
    CAU_LAC_BO ||--o{ VAN_DONG_VIEN : has
    VAN_DONG_VIEN ||--o{ DANG_KI_CAI_NHAN : makes
    NOI_DUNG_THI_DAU ||--o{ DANG_KI_NOI_DUNG : for
    COURT_SESSION ||--o{ BADMINTON_MATCH : hosts
    BADMINTON_MATCH ||--o{ CHI_TIET_VAN : contains
    CHI_TIET_TRAN_DAU ||--o{ CHI_TIET_VAN : includes
    TOURNAMENT_GALLERY ||--o{ GIAI_DAU : documents
```

---

## ğŸš€ TÃNH NÄ‚NG HIá»†N Táº I

### ğŸ§­ Äiá»u hÆ°á»›ng & mÃ n hÃ¬nh chÃ­nh (Desktop)

#### MainFrame (JFrame chÃ­nh)
- **Menu bar**: File, Settings, Tools, Help
- **Tab panels**: 
  - "SÃ¢n thi Ä‘áº¥u" (BadmintonControlPanel) - Quáº£n lÃ½ cÃ¡c sÃ¢n
  - "Giáº£i Ä‘áº¥u" (TournamentPanel) - Quáº£n lÃ½ tournament data
  - "GiÃ¡m sÃ¡t" (MonitorTab) - Theo dÃµi tá»•ng thá»ƒ
  - "Káº¿t quáº£ Ä‘Ã£ thi Ä‘áº¥u" (HistoryTab) - Lá»‹ch sá»­ vÃ  snapshot

#### System Tray Integration
- **Minimize to tray**: Thu nhá» xuá»‘ng system tray
- **Quick actions**: Show/Hide, Exit tá»« context menu
- **Status indicators**: Icon thay Ä‘á»•i theo tráº¡ng thÃ¡i hoáº¡t Ä‘á»™ng

#### Network Interface Chooser
- **Startup dialog**: Chá»n network interface khi khá»Ÿi Ä‘á»™ng
- **IPv4 filtering**: Chá»‰ hiá»ƒn thá»‹ interfaces cÃ³ IPv4 valid
- **Auto-detection**: Tá»± Ä‘á»™ng detect vÃ  Æ°u tiÃªn interfaces phÃ¹ há»£p

### ğŸŸï¸ Quáº£n lÃ½ Ä‘a sÃ¢n & Ä‘iá»u khiá»ƒn tráº­n Ä‘áº¥u

#### Táº¡o vÃ  quáº£n lÃ½ sÃ¢n
- Tá»‘i Ä‘a **5 sÃ¢n** Ä‘á»“ng thá»i (configurable)
- Má»—i sÃ¢n cÃ³ **PIN 4 chá»¯ sá»‘** unique Ä‘á»ƒ remote access
- Thiáº¿t láº­p loáº¡i tráº­n: **ÄÆ¡n nam/ná»¯, ÄÃ´i nam/ná»¯/mixed**
- Cáº¥u hÃ¬nh sá»‘ vÃ¡n: **Best of 1** hoáº·c **Best of 3**

#### Control Interface cho má»—i sÃ¢n
- Äiá»ƒm sá»‘ real-time vá»›i cÃ¡c nÃºt **+/-** cho tá»«ng bÃªn
- **Äá»•i sÃ¢n** (change ends) vÃ  **reset tráº­n Ä‘áº¥u**
- **VÃ¡n tiáº¿p theo** khi káº¿t thÃºc vÃ¡n
- Hiá»ƒn thá»‹ thÃ´ng tin: tÃªn players/teams, loáº¡i tráº­n, tráº¡ng thÃ¡i

### ğŸŒ Web Platform (Tournament Hub)

Web Platform phá»¥c vá»¥ 3 má»¥c Ä‘Ã­ch chÃ­nh:
1. **Landing Page**: Giá»›i thiá»‡u, quáº£ng bÃ¡ tÃ­nh nÄƒng BTMS
2. **App Hub**: Trang dÃ nh cho ngÆ°á»i quan tÃ¢m Ä‘áº¿n á»©ng dá»¥ng BTMS Desktop
3. **Tournament Hub**: Trung tÃ¢m giáº£i Ä‘áº¥u cáº§u lÃ´ng cÃ´ng khai

#### ğŸ  Landing Page (`/`, `/home`)
- **Hero Section**: Giá»›i thiá»‡u BTMS vá»›i CTA buttons
- **Stats Counter**: Hiá»ƒn thá»‹ thá»‘ng kÃª Ä‘á»™ng tá»« database
  - Tá»•ng sá»‘ giáº£i Ä‘áº¥u, ngÆ°á»i Ä‘Äƒng kÃ½, tráº­n Ä‘áº¥u
  - Sá»­ dá»¥ng CountUp.js vá»›i animation
- **Featured Tournaments**: Carousel giáº£i Ä‘áº¥u ná»•i báº­t
- **App Showcase**: Demo tÃ­nh nÄƒng á»©ng dá»¥ng Desktop
- **SEO Optimized**: Meta tags, structured data

#### ğŸ† Tournament Hub (`/tournaments`)
- **Tournament Home** (`/tournaments`):
  - Featured tournaments vá»›i Swiper carousel
  - Live tournaments section vá»›i real-time pulse
  - Category stats (Amateur, Semi-pro, Professional, v.v.)
  - Quick registration CTA

- **Tournament List** (`/tournaments/list`):
  - Grid/List view toggle vá»›i persistence
  - AJAX live filters (khÃ´ng reload trang)
  - Multi-filter: tráº¡ng thÃ¡i, Ä‘á»‹a Ä‘iá»ƒm, cáº¥p Ä‘á»™, thá»ƒ loáº¡i
  - Quick View modal vá»›i tournament preview
  - Infinite scroll pagination
  - Search autocomplete vá»›i debounce

- **Tournament Detail** (`/tournaments/{id}`):
  - Full tournament information
  - Image gallery vá»›i lightbox
  - Registration form vá»›i validation
  - Related tournaments carousel
  - Bracket/Schedule tabs (future)

- **Tournament Calendar** (`/tournaments/calendar`):
  - FullCalendar integration
  - Month/Week/List views
  - Event modal on click
  - Color-coded by tournament status

#### ğŸ“± App Hub (`/app`)
- ThÃ´ng tin chi tiáº¿t vá» BTMS Desktop
- Screenshots vÃ  demo
- Download section
- FAQ section

#### ğŸ” Remote Scoreboard (Legacy)
- **PIN Entry**: `http://[IP]:2345/pin`
- **Scoreboard**: `/scoreboard/{pin}`
- Real-time score updates via SSE
- Mobile-friendly touch controls

### ğŸ”Œ REST API & SSE

#### ğŸ“‹ **API Overview**
BTMS cung cáº¥p **dual API architecture** Ä‘á»ƒ há»— trá»£ cáº£ PIN-based access vÃ  direct access:

| API Mode | Base URL | Authentication | Purpose |
|----------|----------|----------------|---------|
| **PIN Mode** | `/api/court/{pin}/**` | 4-digit PIN | Multi-court vá»›i PIN isolation |
| **Direct Mode** | `/api/scoreboard/**` | None | Single court direct access |

#### ğŸŸï¸ **PIN-based Court API** (`/api/court/{pin}`)

##### **Court Information & Status**
```http
GET    /api/court/{pin}                 # Basic court information
GET    /api/court/{pin}/status          # PIN validation & detailed court status  
GET    /api/court/{pin}/sync            # Complete match snapshot data
GET    /api/court/{pin}/stream          # SSE stream for real-time updates
GET    /api/court/health                # API health check endpoint
```

##### **Score Control Operations**
```http
POST   /api/court/{pin}/increaseA       # Increase team A score (+1)
POST   /api/court/{pin}/decreaseA       # Decrease team A score (-1)
POST   /api/court/{pin}/increaseB       # Increase team B score (+1)  
POST   /api/court/{pin}/decreaseB       # Decrease team B score (-1)
```

##### **Match Control Operations**
```http
POST   /api/court/{pin}/reset           # Reset entire match to 0-0
POST   /api/court/{pin}/next            # Proceed to next game
POST   /api/court/{pin}/swap            # Swap court ends
POST   /api/court/{pin}/change-server   # Change server
POST   /api/court/{pin}/undo            # Undo last action
```

##### **Debug & Testing Endpoints**
```http
GET    /api/court/{pin}/test            # Quick controller functionality test
POST   /api/court/{pin}/{action}        # Generic action endpoint for testing
```

#### ğŸ“Š **Direct Scoreboard API** (`/api/scoreboard`)

##### **No-PIN Access Endpoints**
```http
GET    /api/scoreboard                  # Basic scoreboard information
GET    /api/scoreboard/sync             # Complete match snapshot
GET    /api/scoreboard/stream           # SSE stream for updates
```

##### **Score & Match Control (No-PIN)**
```http
POST   /api/scoreboard/increaseA        # Increase team A score
POST   /api/scoreboard/decreaseA        # Decrease team A score
POST   /api/scoreboard/increaseB        # Increase team B score
POST   /api/scoreboard/decreaseB        # Decrease team B score
POST   /api/scoreboard/reset            # Reset match
POST   /api/scoreboard/next             # Next game
POST   /api/scoreboard/swap             # Swap court ends
POST   /api/scoreboard/change-server    # Change server
POST   /api/scoreboard/undo             # Undo last action
```

#### ğŸš€ **Server-Sent Events (SSE) Architecture**

##### **SSE Stream Endpoints**
```http
GET    /api/court/{pin}/stream          # PIN-specific SSE stream
GET    /api/scoreboard/stream           # Direct SSE stream
```

##### **SSE Event Types & Payload**
| Event Type | Purpose | Payload |
|------------|---------|---------|
| `init` | Initial connection state | Complete match data |
| `update` | Real-time match updates | Changed fields only |

##### **SSE Implementation Features**
- **Async Processing**: Non-blocking event broadcasting
- **Client Throttling**: 80ms minimum interval between events
- **Automatic Reconnection**: Client-side fallback to polling
- **JSON Payload Caching**: Performance optimization for repeated data
- **Thread-safe Broadcasting**: Concurrent client management

#### ğŸ“ **API Response Format**

##### **Standard Success Response**
```json
{
  "names": ["Team A", "Team B"],
  "clubs": ["Club A", "Club B"], 
  "score": [21, 19],
  "games": [1, 0],
  "gameNumber": 1,
  "server": 0,
  "doubles": false,
  "betweenGamesInterval": false,
  "changedEndsThisGame": false,
  "matchFinished": false,
  "bestOf": 3,
  "elapsedSec": 1234,
  "gameScores": [[21, 19]]
}
```

##### **Error Handling**
- **Graceful Degradation**: Fallback mechanisms for connection failures
- **Automatic Recovery**: SSE reconnection strategies  
- **Comprehensive Logging**: Detailed error tracking and debugging

### ğŸ—ƒï¸ CÃ¡c mÃ´-Ä‘un dá»¯ liá»‡u/ghi nháº­t kÃ½ (trÃ­ch yáº¿u)

#### Tournament Data Management
- **Tournaments**: Quáº£n lÃ½ thÃ´ng tin giáº£i Ä‘áº¥u
- **Contents**: Ná»™i dung thi Ä‘áº¥u (Ä‘Æ¡n nam, Ä‘Ã´i ná»¯, v.v.)
- **Clubs**: Danh sÃ¡ch cÃ¢u láº¡c bá»™ tham gia
- **Registrations**: ÄÄƒng kÃ½ váº­n Ä‘á»™ng viÃªn theo giáº£i

#### Court & Match Logging
- **Court states**: LÆ°u tráº¡ng thÃ¡i sÃ¢n theo thá»i gian
- **Score history**: Lá»‹ch sá»­ thay Ä‘á»•i Ä‘iá»ƒm sá»‘
- **Match results**: Káº¿t quáº£ tráº­n Ä‘áº¥u hoÃ n táº¥t
- **System events**: Log hoáº¡t Ä‘á»™ng há»‡ thá»‘ng

#### File Storage
- **Screenshots**: Capture mÃ n hÃ¬nh scoreboard
- **Exports**: Xuáº¥t dá»¯ liá»‡u ra file (CSV, JSON)
- **Backups**: Sao lÆ°u dá»¯ liá»‡u Ä‘á»‹nh ká»³
- **Logs**: File log há»‡ thá»‘ng vÃ  error

---

## ğŸ”® Káº¾ HOáº CH TÆ¯Æ NG LAI

### ğŸ”® PhÃ¡t tháº£o tÃ­nh nÄƒng dá»± kiáº¿n

#### ğŸ“‹ TÃ­nh nÄƒng Ä‘Ã£ hoÃ n thÃ nh (v2.1.0)

##### âœ… Desktop Application (Core)
- âœ… **Quáº£n lÃ½ Ä‘a sÃ¢n**: Há»— trá»£ tá»‘i Ä‘a 5 sÃ¢n Ä‘á»“ng thá»i vá»›i PIN unique
- âœ… **Real-time control**: Desktop + Web interface, SSE streaming
- âœ… **Tournament management**: Giáº£i Ä‘áº¥u, ná»™i dung, cÃ¢u láº¡c bá»™, Ä‘Äƒng kÃ½
- âœ… **H2 TCP Server**: Remote database access cho mÃ¡y khÃ¡c
- âœ… **IPv4 filtering**: Network interface chá»‰ nháº­n IPv4
- âœ… **MSI packaging**: Windows installer vá»›i JRE bundled
- âœ… **Multi-display support**: Vertical/horizontal scoreboards
- âœ… **Virtual Threads**: SerialExecutor per-court vá»›i Java 21 virtual threads

##### âœ… Web Platform (Tournament Hub)
- âœ… **Landing Page**: Hero, stats, featured tournaments, app showcase
- âœ… **Tournament Hub**: Dashboard, list, detail, calendar views
- âœ… **Tournament List**: Grid/List toggle, AJAX filters, Quick View modal
- âœ… **Tournament Detail**: Full info, gallery, registration form
- âœ… **Tournament Calendar**: FullCalendar integration vá»›i event modal
- âœ… **Responsive Design**: Mobile-first, Bootstrap 5, touch-friendly
- âœ… **Dynamic Stats**: Database-driven statistics vá»›i caching
- âœ… **Image Lazy Loading**: Performance optimization cho images
- âœ… **AJAX Live Filters**: Filter khÃ´ng reload trang, history.pushState

##### âœ… Performance & Caching
- âœ… **Spring Cache**: Multi-layer caching vá»›i ConcurrentMapCacheManager
  - `featured-tournaments`: Giáº£i ná»•i báº­t
  - `tournament-stats`: Thá»‘ng kÃª tá»•ng há»£p
  - `tournament-detail`: Chi tiáº¿t theo ID
  - `upcoming-tournaments`: Giáº£i sáº¯p diá»…n ra
  - `ongoing-tournaments`: Giáº£i Ä‘ang diá»…n ra
  - `landing-page-stats`: Stats cho landing page
- âœ… **Cache Eviction**: Auto-evict khi CRUD operations
- âœ… **Lazy Loading**: Images vá»›i `loading="lazy"` attribute
- âœ… **Production Logger**: BTMSUtils.log vá»›i debug toggle

#### ğŸš§ PhiÃªn báº£n 2.2 (Äang lÃªn káº¿ hoáº¡ch)

##### ğŸŒ Quá»‘c táº¿ hoÃ¡ & Báº£o máº­t
- [ ] **Multi-language Support**: 
  - Interface tiáº¿ng Anh/Viá»‡t Nam
  - Localization cho templates vÃ  messages
  - Dynamic language switching
- [ ] **Enhanced Security**:
  - JWT token authentication cho API
  - Role-based access control chi tiáº¿t hÆ¡n
  - PIN encryption vÃ  session management
  - HTTPS support vá»›i SSL certificates

##### â˜ï¸ Cloud & Mobile
- [ ] **Cloud Integration**:
  - Auto backup tournament data lÃªn cloud storage
  - Real-time sync giá»¯a multiple venues
  - Cloud-based tournament analytics
- [ ] **Mobile Applications**:
  - Native Android/iOS companion app
  - Referee mobile app vá»›i offline capability
  - Push notifications cho score updates
  - QR code scanner integration

##### ğŸ“Š Analytics & Reporting
- [ ] **Advanced Analytics**:
  - Match statistics vÃ  performance metrics
  - Player/team performance tracking
  - Tournament trend analysis
  - Export reports (PDF, Excel, CSV)
- [ ] **Tournament Bracket System**:
  - Automated bracket generation
  - Draw management vá»›i seeding
  - Knockout/round-robin tournaments
  - Live bracket updates

#### ğŸ”® PhiÃªn báº£n 3.0 (TÆ°Æ¡ng lai xa)

##### ğŸ—ï¸ Kiáº¿n trÃºc & Scale
- [ ] **Microservices Architecture**:
  - TÃ¡ch thÃ nh services Ä‘á»™c láº­p (Court, Tournament, User, Analytics)
  - API Gateway vÃ  service discovery
  - Docker containerization
  - Kubernetes orchestration
- [ ] **Multi-venue Support**:
  - Sync tournaments across multiple locations
  - Central management dashboard
  - Venue-specific configurations
  - Cross-venue competitions

##### ğŸ¤– AI & Automation
- [ ] **AI-powered Features**:
  - Computer vision auto-scoring
  - Video analysis vÃ  highlight generation
  - Predictive analytics cho match outcomes
  - Smart scheduling optimization
- [ ] **Live Streaming Integration**:
  - Real-time video streaming
  - Multi-camera support
  - Automated highlight clips
  - Social media integration

##### ğŸ¯ Advanced Features
- [ ] **Player Rating System**:
  - ELO-based ranking algorithm
  - Performance tracking over time
  - Skill level assessments
  - Matchmaking recommendations
- [ ] **Sponsor & Commercial**:
  - Advertisement management system
  - Branding customization
  - Revenue tracking
  - Sponsor portal integration

#### ğŸ’¡ Community & Development

##### ğŸ¤ Open Source Contributions
- [ ] **Plugin Architecture**: Extensible system cho custom features
- [ ] **API Documentation**: Comprehensive REST API docs
- [ ] **SDK Development**: Client libraries cho third-party integration
- [ ] **Community Portal**: Feature requests, bug reports, discussions

##### ğŸ§ª Quality & Performance
- [ ] **Testing Suite**: Unit, integration, vÃ  e2e testing
- [ ] **Performance Monitoring**: Real-time performance metrics
- [ ] **Load Testing**: Support cho large-scale tournaments
- [ ] **Accessibility**: WCAG compliance cho web interfaces

### ğŸ”„ Luá»“ng hoáº¡t Ä‘á»™ng sÆ¡ bá»™

#### ğŸ“‹ Workflow tá»•ng quan há»‡ thá»‘ng

##### ğŸš€ Quy trÃ¬nh khá»Ÿi Ä‘á»™ng (Startup Flow)
```mermaid
graph TD
    A[Khá»Ÿi Ä‘á»™ng á»©ng dá»¥ng] --> B[Chá»n Network Interface IPv4]
    B --> C[Khá»Ÿi Ä‘á»™ng H2 TCP Server]
    C --> D[Káº¿t ná»‘i SQL Server Database]
    D --> E[Load Spring Boot Context]
    E --> F[Hiá»ƒn thá»‹ MainFrame Desktop UI]
    F --> G[ÄÄƒng nháº­p xÃ¡c thá»±c]
    G --> H[Chá»n giáº£i Ä‘áº¥u active]
    H --> I[Sáºµn sÃ ng sá»­ dá»¥ng]
```

##### ğŸ† Quy trÃ¬nh quáº£n lÃ½ giáº£i Ä‘áº¥u (Tournament Management)
```mermaid
graph LR
    A[Táº¡o giáº£i Ä‘áº¥u má»›i] --> B[Thiáº¿t láº­p ná»™i dung thi Ä‘áº¥u]
    B --> C[Quáº£n lÃ½ cÃ¢u láº¡c bá»™]
    C --> D[ÄÄƒng kÃ½ váº­n Ä‘á»™ng viÃªn/Ä‘á»™i]
    D --> E[Táº¡o lá»‹ch thi Ä‘áº¥u]
    E --> F[Báº¯t Ä‘áº§u thi Ä‘áº¥u]
    F --> G[Thu tháº­p káº¿t quáº£]
    G --> H[Xuáº¥t bÃ¡o cÃ¡o]
```

#### ğŸŸï¸ Quy trÃ¬nh quáº£n lÃ½ sÃ¢n thi Ä‘áº¥u

##### ğŸ® Thiáº¿t láº­p vÃ  Ä‘iá»u khiá»ƒn sÃ¢n (Court Management Flow)
```mermaid
sequenceDiagram
    participant Admin as ğŸ‘¨â€ğŸ’¼ Admin Desktop
    participant Court as ğŸŸï¸ Court Manager
    participant Mobile as ğŸ“± Mobile Browser
    participant API as ğŸ”Œ REST API
    participant DB as ğŸ—„ï¸ Database

    Admin->>Court: Táº¡o sÃ¢n má»›i (ID, PIN)
    Court->>DB: LÆ°u thÃ´ng tin sÃ¢n
    Admin->>Court: Thiáº¿t láº­p tráº­n Ä‘áº¥u (ÄÆ¡n/ÄÃ´i, BO1/BO3)
    Admin->>Court: Nháº­p tÃªn cáº§u thá»§/Ä‘á»™i
    Court->>API: Broadcast tráº¡ng thÃ¡i qua SSE
    
    Mobile->>API: GET /pin (nháº­p PIN)
    Mobile->>API: GET /scoreboard/{pin}
    API->>Court: Validate PIN
    Court-->>Mobile: Hiá»ƒn thá»‹ báº£ng Ä‘iá»ƒm
    
    Mobile->>API: POST /{pin}/increaseA
    API->>Court: Cáº­p nháº­t Ä‘iá»ƒm sá»‘
    Court->>DB: LÆ°u log scoring
    Court->>API: Broadcast update qua SSE
    API-->>Mobile: Real-time score update
    API-->>Admin: Desktop UI update
```

##### ğŸ“Š Chu trÃ¬nh thi Ä‘áº¥u (Match Lifecycle)
```mermaid
stateDiagram-v2
    [*] --> Setup: Táº¡o sÃ¢n má»›i
    Setup --> Ready: Thiáº¿t láº­p hoÃ n táº¥t
    Ready --> Playing: Báº¯t Ä‘áº§u thi Ä‘áº¥u
    Playing --> GameFinished: Káº¿t thÃºc vÃ¡n
    GameFinished --> Playing: VÃ¡n tiáº¿p theo
    GameFinished --> MatchFinished: Háº¿t cÃ¡c vÃ¡n
    Playing --> Paused: Táº¡m dá»«ng
    Paused --> Playing: Tiáº¿p tá»¥c
    MatchFinished --> Setup: Reset/Tráº­n má»›i
    
    Playing --> Playing: +/- Ä‘iá»ƒm sá»‘
    Playing --> Playing: Äá»•i sÃ¢n/server
```

#### ğŸŒ Luá»“ng Web Interface

##### ğŸ“± Quy trÃ¬nh Ä‘iá»u khiá»ƒn tá»« xa (Remote Control Flow)
```mermaid
graph TD
    A[Truy cáº­p IP:2345/pin] --> B[Nháº­p PIN 4 chá»¯ sá»‘]
    B --> C{PIN há»£p lá»‡?}
    C -->|KhÃ´ng| D[Hiá»ƒn thá»‹ lá»—i]
    C -->|CÃ³| E[Redirect /scoreboard/PIN]
    E --> F[Load giao diá»‡n báº£ng Ä‘iá»ƒm]
    F --> G[Káº¿t ná»‘i SSE stream]
    G --> H[Sáºµn sÃ ng Ä‘iá»u khiá»ƒn]
    
    H --> I[TÄƒng/giáº£m Ä‘iá»ƒm]
    H --> J[Reset tráº­n Ä‘áº¥u] 
    H --> K[Äá»•i sÃ¢n/server]
    H --> L[VÃ¡n tiáº¿p theo]
    
    I --> M[Gá»­i API request]
    J --> M
    K --> M  
    L --> M
    M --> N[Cáº­p nháº­t real-time via SSE]
    N --> H
```

#### ğŸ”„ Luá»“ng dá»¯ liá»‡u (Data Flow)

##### ğŸ’¾ Luá»“ng lÆ°u trá»¯ vÃ  Ä‘á»“ng bá»™ (Data Sync Flow)
```mermaid
graph LR
    subgraph "Desktop Application"
        A[Java Swing UI] 
        B[Spring Boot Core]
        C[JPA/Hibernate]
    end
    
    subgraph "Web Interface" 
        D[Thymeleaf Templates]
        E[REST API Controllers]
        F[SSE Broadcasting]
    end
    
    subgraph "Database Layer"
        G[SQL Server Primary]
        H[H2 TCP Server]
        I[Local File Storage]
    end
    
    subgraph "External Devices"
        J[Mobile Browsers]
        K[Remote H2 Clients]
        L[Network Display]
    end
    
    A <--> B
    B <--> C
    C <--> G
    B <--> H
    
    B <--> E
    E <--> D
    E <--> F
    F <--> J
    
    K <--> H
    L <--> F
    
    B --> I
```

#### ğŸ”§ Luá»“ng setup vÃ  deployment

##### ğŸ“¦ Quy trÃ¬nh triá»ƒn khai (Deployment Process)
```mermaid
graph TD
    A[Development] --> B[Maven Build]
    B --> C[Unit Testing]
    C --> D[Package JAR]
    D --> E[JPackage MSI Creation]
    E --> F[MSI Distribution]
    
    F --> G[Install on Target Machine]
    G --> H[Configure Database Connection]
    H --> I[Setup Network Interfaces]
    I --> J[Start Application]
    
    J --> K{First Run?}
    K -->|Yes| L[Initialize Database Schema]
    K -->|No| M[Load Existing Data]
    L --> N[Ready for Use]
    M --> N
```

##### ğŸŒ Network Architecture Flow
```mermaid
graph TD
    subgraph "Server Machine"
        A[BTMS Application<br/>Port 2345]
        B[H2 TCP Server<br/>Port 9092] 
        C[SQL Server<br/>Port 1433]
    end
    
    subgraph "LAN Network"
        D[Admin Desktop<br/>192.168.1.100]
        E[Mobile Device<br/>192.168.1.101]
        F[Tablet<br/>192.168.1.102]
        G[Remote H2 Client<br/>192.168.1.103]
    end
    
    subgraph "Display Devices"
        H[Scoreboard Display 1]
        I[Scoreboard Display 2]
        J[Monitor Display]
    end
    
    D --> A
    E --> A
    F --> A
    G --> B
    A --> C
    
    A -.->|UDP Multicast<br/>239.255.50.50:50505| H
    A -.->|UDP Multicast| I
    A -.->|SSE Stream| J
```

#### âš¡ Performance & Monitoring Flow

##### ğŸ“ˆ Luá»“ng giÃ¡m sÃ¡t hiá»‡u nÄƒng
```mermaid
graph LR
    A[Application Metrics] --> B[Resource Monitor]
    B --> C[Memory Usage<br/>Status Bar]
    A --> D[Database Pool<br/>HikariCP]
    A --> E[SSE Connections<br/>Thread Pool]
    
    F[Court Status] --> G[MonitorTab<br/>Real-time View]
    F --> H[Screenshot<br/>Archive]
    F --> I[Log System<br/>Audit Trail]
    
    J[Network Traffic] --> K[UDP Multicast<br/>Monitoring]
    J --> L[HTTP Requests<br/>REST API]
    
    B --> M[Performance<br/>Alerts]
    G --> M
    I --> M
```

---

## ğŸ”§ Váº¬N HÃ€NH & Báº¢O TRÃŒ

### ğŸ§ª Kiá»ƒm thá»­ & giÃ¡m sÃ¡t

#### Testing Strategy
- **Unit Tests**: JUnit cho logic core
- **Integration Tests**: Spring Boot Test cho API
- **Manual Testing**: UI testing cho desktop components
- **Performance Testing**: Load testing cho concurrent users

#### Monitoring & Logging
- **Application Logging**: SLF4J + Logback
- **Performance Metrics**: Memory usage hiá»ƒn thá»‹ trÃªn status bar
- **Error Tracking**: Exception logging vÃ  user notification
- **System Health**: Database connection status, SSE connection count

### ğŸ”’ Báº£o máº­t & quyá»n truy cáº­p

#### Current Security Measures
- **PIN-based Access**: 4-digit PIN cho má»—i sÃ¢n
- **Local Network**: Chá»‰ cháº¡y trÃªn LAN, khÃ´ng expose ra internet
- **Input Validation**: Validate táº¥t cáº£ API inputs
- **Session Management**: Temporary sessions cho web interface

#### Security Considerations
- **No Authentication**: ChÆ°a cÃ³ user authentication system
- **PIN Enumeration**: 4-digit PIN cÃ³ thá»ƒ bá»‹ brute force
- **HTTP Only**: ChÆ°a há»— trá»£ HTTPS
- **Database Security**: SQL injection protection qua JPA

### âš¡ Hiá»‡u nÄƒng & tá»‘i Æ°u

#### Performance Optimizations
- **Connection Pooling**: HikariCP cho database connections
- **Lazy Loading**: JPA lazy loading cho entities
- **Static Resource Caching**: Browser caching cho CSS/JS
- **SSE Efficiency**: Event-driven updates thay vÃ¬ polling

#### Quáº£n lÃ½ thread & Ä‘a sÃ¢n hiá»‡n Ä‘áº¡i
- Tá»« phiÃªn báº£n 2.1, má»i thao tÃ¡c cáº­p nháº­t tráº¡ng thÃ¡i sÃ¢n Ä‘á»u Ä‘Æ°á»£c thá»±c thi tuáº§n tá»± qua `SerialExecutor` (per-court), sá»­ dá»¥ng virtual threads (Java 21) lÃ m backing executor.
- Äiá»u nÃ y Ä‘áº£m báº£o khÃ´ng race condition khi thao tÃ¡c Ä‘á»“ng thá»i nhiá»u sÃ¢n, Ä‘á»“ng thá»i cho phÃ©p má»Ÿ rá»™ng sá»‘ lÆ°á»£ng sÃ¢n lá»›n mÃ  khÃ´ng bá»‹ giá»›i háº¡n bá»Ÿi sá»‘ lÆ°á»£ng thread váº­t lÃ½.
- API `submitToCourt` giÃºp cÃ¡c thao tÃ¡c cáº­p nháº­t Ä‘iá»ƒm sá»‘, tráº¡ng thÃ¡i tráº­n Ä‘áº¥u, ghi DB... Ä‘á»u an toÃ n vÃ  hiá»‡u quáº£.

#### Resource Management
- **Memory Usage**: Monitor vÃ  display trÃªn status bar
- **Thread Management**: Controlled thread pools cho SSE
- **Database Optimization**: Proper indexing vÃ  query optimization
- **Garbage Collection**: JVM tuning cho desktop performance

### ğŸ“¦ ÄÃ³ng gÃ³i & cÃ i Ä‘áº·t (Windows MSI)

#### JPackage Configuration
- **Runtime**: Bundle JRE 21 vá»›i application
- **MSI Installer**: Windows native installer
- **Auto-updater**: Future plan cho automatic updates
- **System Integration**: Desktop shortcuts, Start menu entries

#### Installation Process
- **Pre-requisites**: Windows 10/11 64-bit
- **Database Setup**: User cáº§n setup SQL Server trÆ°á»›c
- **Network Configuration**: Auto-detect network interfaces
- **First Run**: Configuration wizard cho database connection

### ğŸ§­ HÆ°á»›ng dáº«n váº­n hÃ nh nhanh

#### Quick Start Guide
1. **CÃ i Ä‘áº·t**: Cháº¡y MSI installer
2. **Database**: Thiáº¿t láº­p SQL Server connection
3. **Network**: Chá»n network interface IPv4
4. **Tournament**: Táº¡o giáº£i Ä‘áº¥u vÃ  ná»™i dung thi Ä‘áº¥u
5. **Courts**: Táº¡o sÃ¢n vá»›i PIN vÃ  báº¯t Ä‘áº§u thi Ä‘áº¥u

#### Daily Operations
- **Táº¡o sÃ¢n má»›i**: Chá»n loáº¡i tráº­n, nháº­p tÃªn players, generate PIN
- **Remote control**: Share PIN vá»›i users Ä‘á»ƒ Ä‘iá»u khiá»ƒn tá»« mobile
- **Monitoring**: Tab "GiÃ¡m sÃ¡t" Ä‘á»ƒ theo dÃµi táº¥t cáº£ sÃ¢n
- **Results**: Tab "Káº¿t quáº£ Ä‘Ã£ thi Ä‘áº¥u" Ä‘á»ƒ xem áº£nh chá»¥p/snapshot

#### Troubleshooting
- **Connection Issues**: Check network interface vÃ  firewall
- **Database Problems**: Verify SQL Server connection string
- **Performance**: Monitor memory usage vÃ  restart náº¿u cáº§n
- **SSE Issues**: Fallback to polling mode tá»± Ä‘á»™ng

---

## ğŸ“Š Káº¿t luáº­n

**Badminton Tournament Management System (BTMS) v1.0.0** lÃ  má»™t há»‡ thá»‘ng hoÃ n chá»‰nh vÃ  máº¡nh máº½ cho viá»‡c quáº£n lÃ½ giáº£i cáº§u lÃ´ng Ä‘a sÃ¢n vá»›i kiáº¿n trÃºc hybrid Ä‘á»™c Ä‘Ã¡o. Dá»± Ã¡n thá»ƒ hiá»‡n sá»± káº¿t há»£p tinh táº¿ giá»¯a desktop application truyá»n thá»‘ng vÃ  web platform hiá»‡n Ä‘áº¡i.

### âœ… **Äiá»ƒm máº¡nh hiá»‡n táº¡i**

#### ğŸ—ï¸ **Kiáº¿n trÃºc & CÃ´ng nghá»‡**
- **Hybrid Desktop/Web**: Kiáº¿n trÃºc Ä‘á»™c Ä‘Ã¡o káº¿t há»£p Java Swing vÃ  Spring Boot trong cÃ¹ng JVM
- **Modern Tech Stack**: Java 21, Spring Boot 3.4.0, FlatLaf, Bootstrap 5.3.3
- **Real-time Performance**: Server-Sent Events + UDP Multicast cho sync tá»©c thÃ¬
- **Cross-platform Access**: Desktop admin + responsive web interface cho má»i thiáº¿t bá»‹

#### ğŸŸï¸ **Quáº£n lÃ½ Tournament**
- **Multi-court Management**: Há»— trá»£ 5 sÃ¢n Ä‘á»“ng thá»i vá»›i PIN-based access control
- **Professional Data Model**: Tournament, Player, Club management vá»›i web platform integration
- **Real-time Monitoring**: Monitor tab cho giÃ¡m sÃ¡t tá»•ng thá»ƒ cÃ¡c sÃ¢n
- **Comprehensive Analytics**: View count, ratings, performance tracking

#### ğŸŒ **Network & Connectivity**
- **H2 TCP Server**: Remote database access cho multi-machine setup
- **IPv4-only Filtering**: Security through network isolation
- **Network Interface Selection**: Flexible deployment configuration
- **MSI Packaging**: Professional Windows deployment vá»›i JRE bundled

#### ğŸ“± **Mobile & Web Features**
- **PIN Authentication**: 4-digit secure access per court
- **QR Code Integration**: Quick mobile access
- **Touch-friendly Interface**: Optimized for tablets vÃ  touchscreens
- **Responsive Design**: Bootstrap-based mobile-first design

### ğŸš€ **Táº§m nhÃ¬n phÃ¡t triá»ƒn**

#### ğŸ¯ **Roadmap v1.1-v1.2 (2025)**
- **Enhanced Security**: JWT authentication, HTTPS support, advanced PIN encryption
- **Multi-language Support**: English/Vietnamese localization vá»›i dynamic switching
- **Cloud Integration**: Auto-backup, real-time sync across venues
- **Mobile Apps**: Native Android/iOS companion applications

#### ğŸ”® **Vision v2.0+ (2026+)**
- **Microservices Architecture**: Scalable service-oriented design
- **AI-powered Features**: Computer vision auto-scoring, predictive analytics
- **Live Streaming Integration**: Real-time video vá»›i automated highlights
- **Multi-venue Management**: Cross-location tournament coordination

### ğŸ’¡ **GiÃ¡ trá»‹ cá»‘t lÃµi**

#### ğŸ¯ **Innovation trong Sports Tech**
BTMS khÃ´ng chá»‰ lÃ  má»™t tournament management tool mÃ  lÃ  **ná»n táº£ng sá»‘ hÃ³a toÃ n diá»‡n** cho badminton community. Há»‡ thá»‘ng pioneered viá»‡c káº¿t há»£p desktop administrative control vá»›i mobile-friendly real-time access.

#### ğŸ† **Professional Tournament Management**
- **Scalability**: Tá»« local club tournaments Ä‘áº¿n professional competitions
- **Reliability**: Thread-safe operations, connection pooling, graceful degradation
- **User Experience**: Intuitive desktop interface + mobile-optimized web controls
- **Data Integrity**: Comprehensive logging, backup systems, audit trails

#### ğŸŒ **Community Impact**
Há»‡ thá»‘ng Ä‘Ã£ Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ phá»¥c vá»¥ tá»« **cÃ¢u láº¡c bá»™ Ä‘á»‹a phÆ°Æ¡ng** Ä‘áº¿n **giáº£i Ä‘áº¥u chuyÃªn nghiá»‡p**, mang láº¡i:
- **Transparency**: Real-time scoring visibility cho players vÃ  spectators
- **Efficiency**: Automated tournament management giáº£m workload cho organizers
- **Accessibility**: Mobile access cho referees vÃ  officials
- **Professionalism**: Enterprise-grade features cho major tournaments

### ğŸ“ˆ **Technical Excellence**

#### ğŸ¨ **Architecture Highlights**
- **Non-headless Spring Boot**: Breakthrough integration cá»§a desktop + web
- **Java 21 Features**: Virtual threads, enhanced performance, modern language features
- **Thread-safe Multi-court**: Concurrent operations with per-court isolation
- **Real-time Broadcasting**: Low-latency updates via SSE vÃ  UDP multicast

#### ğŸ”§ **Engineering Best Practices**
- **Clean Architecture**: Separation of concerns, dependency injection
- **Performance Optimization**: Connection pooling, caching, async processing
- **Error Handling**: Comprehensive exception management vÃ  graceful recovery
- **Testing Strategy**: Unit tests, integration tests, performance validation

### ğŸŠ **Conclusion**

**BTMS v1.0.0** represents a **significant achievement** trong sports technology, demonstrating how modern software engineering principles cÃ³ thá»ƒ Ä‘Æ°á»£c applied Ä‘á»ƒ create comprehensive tournament management solutions. 

Dá»± Ã¡n successfully combines **enterprise-level architecture** vá»›i **user-friendly interfaces**, creating a platform that scales from **local clubs** to **professional tournaments** while maintaining **high performance** vÃ  **reliability**.

Vá»›i **solid foundation** Ä‘Æ°á»£c established vÃ  **clear roadmap** cho future development, BTMS positioned Ä‘á»ƒ become má»™t **leading solution** trong badminton tournament management landscape.

---

**ğŸ¸ "Empowering Badminton Communities Through Technology" ğŸ¸**

### ğŸ“ˆ Changelog v2.1.0 (26/11/2025)
- âœ¨ **Web Platform**: Tournament Hub hoÃ n chá»‰nh
- âœ¨ **AJAX Filters**: Live filtering khÃ´ng reload trang
- âœ¨ **Dynamic Stats**: Database-driven statistics
- âœ¨ **Spring Cache**: Multi-layer caching vá»›i 9 cache names
- âœ¨ **Image Lazy Loading**: Performance optimization
- âœ¨ **Production Logger**: BTMSUtils.log utility
- ğŸ› **Thymeleaf Fix**: Iterator syntax correction
- ğŸ› **Console Cleanup**: Replace console.log vá»›i log utility

---

*ğŸ“… BÃ¡o cÃ¡o Ä‘Æ°á»£c cáº­p nháº­t: November 28, 2025*  
*ğŸ—ï¸ PhiÃªn báº£n há»‡ thá»‘ng: v1.0.0*  
*ğŸ‘¨â€ğŸ’» TÃ¡c giáº£: Nguyen Viet Hau (@NguyenHau-IT)*  
*ğŸ“„ License: MIT License*  
*ğŸ”— Repository: [GitHub - BTMS](https://github.com/NguyenHau-IT/Badminton_Tournament_Management_System_DB_SQLSRV)*
