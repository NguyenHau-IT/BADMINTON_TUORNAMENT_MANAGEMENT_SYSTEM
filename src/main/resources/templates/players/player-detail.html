<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/base}">
<head>
    <title th:text="${pageTitle}">Chi tiết VĐV - BTMS</title>
    <link rel="stylesheet" th:href="@{/css/players/players.css}">
</head>
<body>
<div layout:fragment="content">
    <!-- Page Header -->
    <section class="page-header player-header">
        <div class="container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Trang chủ</a></li>
                    <li class="breadcrumb-item"><a href="/players">Vận động viên</a></li>
                    <li class="breadcrumb-item active" th:text="${player.name}">VĐV</li>
                </ol>
            </nav>
        </div>
    </section>

    <!-- Player Profile -->
    <section class="player-detail-section section-padding">
        <div class="container">
            <div class="row">
                <!-- Left Column - Profile -->
                <div class="col-lg-4">
                    <div class="player-profile-card" data-aos="fade-right">
                        <!-- Cover & Avatar -->
                        <div class="profile-cover">
                            <img th:src="${player.coverImage}" alt="Cover"
                                 onerror="this.src='/images/players/default-cover.jpg'">
                        </div>
                        <div class="profile-avatar">
                            <img th:src="${player.avatar}" th:alt="${player.name}"
                                 onerror="this.src='/images/players/default-avatar.png'">
                            <span class="rank-badge" th:if="${player.rank}" 
                                  th:classappend="${player.rank <= 3} ? 'top-' + ${player.rank}"
                                  th:text="'#' + ${player.rank}">#1</span>
                        </div>
                        
                        <div class="profile-info">
                            <h2 class="player-name" th:text="${player.name}">Nguyễn Tiến Minh</h2>
                            <p class="player-club" th:text="${player.club}">CLB Cầu lông TP.HCM</p>
                            
                            <div class="player-points" th:if="${player.points}">
                                <span th:text="${#numbers.formatInteger(player.points, 0, 'COMMA')}">52,340</span> điểm
                            </div>
                            
                            <!-- Info List -->
                            <ul class="info-list">
                                <li>
                                    <i class="bi bi-gender-male"></i>
                                    <span class="label">Giới tính:</span>
                                    <span class="value" th:text="${player.gender}">Nam</span>
                                </li>
                                <li>
                                    <i class="bi bi-calendar"></i>
                                    <span class="label">Ngày sinh:</span>
                                    <span class="value" th:text="${player.birthDate}">08/05/1983</span>
                                </li>
                                <li>
                                    <i class="bi bi-geo-alt"></i>
                                    <span class="label">Quê quán:</span>
                                    <span class="value" th:text="${player.birthPlace}">TP.HCM</span>
                                </li>
                                <li>
                                    <i class="bi bi-rulers"></i>
                                    <span class="label">Chiều cao:</span>
                                    <span class="value" th:text="${player.height}">176 cm</span>
                                </li>
                                <li>
                                    <i class="bi bi-speedometer"></i>
                                    <span class="label">Cân nặng:</span>
                                    <span class="value" th:text="${player.weight}">70 kg</span>
                                </li>
                                <li>
                                    <i class="bi bi-hand-index"></i>
                                    <span class="label">Tay thuận:</span>
                                    <span class="value" th:text="${player.playHand}">Tay phải</span>
                                </li>
                                <li>
                                    <i class="bi bi-person-badge"></i>
                                    <span class="label">HLV:</span>
                                    <span class="value" th:text="${player.coach}">Trần Văn Hùng</span>
                                </li>
                                <li>
                                    <i class="bi bi-flag"></i>
                                    <span class="label">Chuyên nghiệp từ:</span>
                                    <span class="value" th:text="${player.turnedPro}">2000</span>
                                </li>
                            </ul>
                            
                            <!-- Social Media -->
                            <div class="social-links" th:if="${player.socialMedia}">
                                <a th:href="${player.socialMedia.facebook}" target="_blank" 
                                   th:if="${player.socialMedia.facebook}" class="social-btn facebook">
                                    <i class="bi bi-facebook"></i>
                                </a>
                                <a th:href="${player.socialMedia.instagram}" target="_blank"
                                   th:if="${player.socialMedia.instagram}" class="social-btn instagram">
                                    <i class="bi bi-instagram"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column - Details -->
                <div class="col-lg-8">
                    <!-- Stats Grid -->
                    <div class="stats-grid" data-aos="fade-up">
                        <div class="stat-card">
                            <i class="bi bi-controller"></i>
                            <div class="stat-content">
                                <span class="stat-value" th:text="${stats.totalMatches}">856</span>
                                <span class="stat-label">Trận đấu</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="bi bi-check-circle"></i>
                            <div class="stat-content">
                                <span class="stat-value" th:text="${stats.wins}">672</span>
                                <span class="stat-label">Thắng</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="bi bi-percent"></i>
                            <div class="stat-content">
                                <span class="stat-value" th:text="${stats.winRate + '%'}">78.5%</span>
                                <span class="stat-label">Tỉ lệ thắng</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="bi bi-trophy"></i>
                            <div class="stat-content">
                                <span class="stat-value" th:text="${stats.titlesWon}">24</span>
                                <span class="stat-label">Vô địch</span>
                            </div>
                        </div>
                    </div>

                    <!-- Bio -->
                    <div class="player-bio-section" data-aos="fade-up" data-aos-delay="100">
                        <h3><i class="bi bi-person-lines-fill"></i> Tiểu sử</h3>
                        <p th:text="${player.bio}">Tiểu sử VĐV...</p>
                    </div>

                    <!-- Achievements -->
                    <div class="achievements-section" data-aos="fade-up" data-aos-delay="200" 
                         th:if="${achievements != null && !achievements.isEmpty()}">
                        <h3><i class="bi bi-award"></i> Thành tích nổi bật</h3>
                        <div class="achievements-timeline">
                            <th:block th:each="ach : ${achievements}">
                                <div class="achievement-item">
                                    <div class="achievement-year" th:text="${ach.year}">2025</div>
                                    <div class="achievement-content">
                                        <i th:class="'bi ' + ${ach.icon}"></i>
                                        <span th:text="${ach.title}">Vô địch BTMS Cup</span>
                                    </div>
                                </div>
                            </th:block>
                        </div>
                    </div>

                    <!-- Tournament History -->
                    <div class="tournaments-section" data-aos="fade-up" data-aos-delay="300"
                         th:if="${tournaments != null && !tournaments.isEmpty()}">
                        <h3><i class="bi bi-calendar-check"></i> Lịch sử giải đấu</h3>
                        <div class="tournaments-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Giải đấu</th>
                                        <th>Thời gian</th>
                                        <th>Kết quả</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="t : ${tournaments}">
                                        <td th:text="${t.name}">BTMS Cup 2025</td>
                                        <td th:text="${t.date}">11/2025</td>
                                        <td>
                                            <span class="result-badge" th:classappend="${t.resultClass}"
                                                  th:text="${t.result}">Vô địch</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Gallery -->
                    <div class="gallery-section" data-aos="fade-up" data-aos-delay="400"
                         th:if="${gallery != null && !gallery.isEmpty()}">
                        <h3><i class="bi bi-images"></i> Hình ảnh</h3>
                        <div class="gallery-grid">
                            <th:block th:each="img : ${gallery}">
                                <div class="gallery-item">
                                    <img th:src="${img}" alt="Gallery"
                                         onerror="this.style.display='none'">
                                </div>
                            </th:block>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<th:block layout:fragment="scripts">
    <script src="/js/players/players.js"></script>
</th:block>
</body>
</html>
