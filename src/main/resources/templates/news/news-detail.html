<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/base}">
<head>
    <title th:text="${pageTitle}">Chi tiết bài viết - BTMS</title>
    <meta name="description" th:content="${pageDescription}">
    <link rel="stylesheet" th:href="@{/css/news/news.css}">
</head>
<body>
<div layout:fragment="content">
    <!-- Page Header -->
    <section class="page-header article-header">
        <div class="container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Trang chủ</a></li>
                    <li class="breadcrumb-item"><a href="/news">Tin tức</a></li>
                    <li class="breadcrumb-item">
                        <a th:href="@{/news/category/{cat}(cat=${article.category})}" 
                           th:text="${article.categoryName}">Danh mục</a>
                    </li>
                    <li class="breadcrumb-item active">Chi tiết</li>
                </ol>
            </nav>
        </div>
    </section>

    <!-- Article Content -->
    <section class="article-section section-padding">
        <div class="container">
            <div class="row">
                <!-- Main Content -->
                <div class="col-lg-8">
                    <article class="article-main" data-aos="fade-up">
                        <!-- Article Header -->
                        <header class="article-header-content">
                            <span class="article-category" th:text="${article.categoryName}">Sự kiện</span>
                            <h1 class="article-title" th:text="${article.title}">Tiêu đề bài viết</h1>
                            <div class="article-meta">
                                <span class="meta-author">
                                    <i class="bi bi-person"></i>
                                    <span th:text="${article.author}">BTMS Admin</span>
                                </span>
                                <span class="meta-date">
                                    <i class="bi bi-calendar3"></i>
                                    <span th:text="${article.publishDate}">01/12/2025</span>
                                </span>
                                <span class="meta-views">
                                    <i class="bi bi-eye"></i>
                                    <span th:text="${article.views}">1250</span> lượt xem
                                </span>
                            </div>
                        </header>

                        <!-- Featured Image -->
                        <div class="article-image">
                            <img th:src="${article.image}" th:alt="${article.title}"
                                 onerror="this.src='/images/news/default-news.jpg'">
                        </div>

                        <!-- Article Body -->
                        <div class="article-body" th:utext="${article.content}">
                            Nội dung bài viết...
                        </div>

                        <!-- Tags -->
                        <div class="article-tags" th:if="${article.tags}">
                            <span class="tags-label"><i class="bi bi-tags"></i> Tags:</span>
                            <th:block th:each="tag : ${article.tags}">
                                <a href="#" class="tag" th:text="${tag}">Tag</a>
                            </th:block>
                        </div>

                        <!-- Share -->
                        <div class="article-share">
                            <span class="share-label">Chia sẻ:</span>
                            <div class="share-buttons">
                                <a href="#" class="share-btn facebook" onclick="shareOnFacebook()">
                                    <i class="bi bi-facebook"></i>
                                </a>
                                <a href="#" class="share-btn twitter" onclick="shareOnTwitter()">
                                    <i class="bi bi-twitter-x"></i>
                                </a>
                                <a href="#" class="share-btn linkedin" onclick="shareOnLinkedIn()">
                                    <i class="bi bi-linkedin"></i>
                                </a>
                                <button class="share-btn copy" onclick="copyLink()">
                                    <i class="bi bi-link-45deg"></i>
                                </button>
                            </div>
                        </div>
                    </article>

                    <!-- Related News -->
                    <section class="related-news" th:if="${relatedNews != null && !relatedNews.isEmpty()}">
                        <h3 class="section-title">
                            <i class="bi bi-collection"></i> Bài viết liên quan
                        </h3>
                        <div class="related-grid">
                            <th:block th:each="news : ${relatedNews}">
                                <article class="related-card">
                                    <div class="card-image">
                                        <img th:src="${news.image}" th:alt="${news.title}"
                                             onerror="this.src='/images/news/default-news.jpg'">
                                    </div>
                                    <div class="card-content">
                                        <h4 class="card-title">
                                            <a th:href="@{/news/{id}(id=${news.id})}" th:text="${news.title}">
                                                Tiêu đề
                                            </a>
                                        </h4>
                                        <span class="card-date" th:text="${news.publishDate}">01/12/2025</span>
                                    </div>
                                </article>
                            </th:block>
                        </div>
                    </section>
                </div>

                <!-- Sidebar -->
                <div class="col-lg-4">
                    <aside class="news-sidebar sticky-sidebar">
                        <!-- Author -->
                        <div class="sidebar-widget author-widget">
                            <h4 class="widget-title">Tác giả</h4>
                            <div class="author-info">
                                <img src="/images/authors/default-author.png" alt="Author">
                                <div class="author-details">
                                    <h5 th:text="${article.author}">BTMS Admin</h5>
                                    <p>Ban biên tập BTMS</p>
                                </div>
                            </div>
                        </div>

                        <!-- Categories -->
                        <div class="sidebar-widget categories-widget">
                            <h4 class="widget-title">Danh mục</h4>
                            <ul class="category-list">
                                <li><a href="/news/category/events"><i class="bi bi-calendar-event"></i> Sự kiện <span>45</span></a></li>
                                <li><a href="/news/category/results"><i class="bi bi-trophy"></i> Kết quả <span>38</span></a></li>
                                <li><a href="/news/category/interviews"><i class="bi bi-mic"></i> Phỏng vấn <span>25</span></a></li>
                                <li><a href="/news/category/tips"><i class="bi bi-lightbulb"></i> Mẹo & Kỹ thuật <span>32</span></a></li>
                            </ul>
                        </div>

                        <!-- Newsletter -->
                        <div class="sidebar-widget newsletter-widget">
                            <h4 class="widget-title">Đăng ký nhận tin</h4>
                            <p>Nhận thông báo bài viết mới</p>
                            <form class="newsletter-form">
                                <input type="email" placeholder="Email của bạn">
                                <button type="submit" class="btn btn-primary btn-block">
                                    Đăng ký
                                </button>
                            </form>
                        </div>
                    </aside>
                </div>
            </div>
        </div>
    </section>
</div>

<th:block layout:fragment="scripts">
    <script src="/js/news/news.js"></script>
    <script>
        function shareOnFacebook() {
            window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(window.location.href), '_blank');
        }
        function shareOnTwitter() {
            window.open('https://twitter.com/intent/tweet?url=' + encodeURIComponent(window.location.href), '_blank');
        }
        function shareOnLinkedIn() {
            window.open('https://www.linkedin.com/shareArticle?mini=true&url=' + encodeURIComponent(window.location.href), '_blank');
        }
        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                alert('Đã sao chép liên kết!');
            });
        }
    </script>
</th:block>
</body>
</html>
