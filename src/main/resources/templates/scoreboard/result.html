<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="theme-color" content="#0a5c49" />
    <title>Kết quả trận đấu · Badminton Tech</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

    <!-- Result Page CSS -->
    <link rel="stylesheet" href="/css/scoreboard/result.css" th:href="@{/css/scoreboard/result.css}" />
</head>

<body>
    <div class="result-container">
        <!-- Trophy Header -->
        <div class="trophy-header">
            <div class="trophy-icon">
                <i class="bi bi-trophy-fill"></i>
            </div>
            <div class="winner-name" th:text="${winner}">Người thắng</div>
            <div class="final-score">
                <span th:text="${games[0]}">0</span> - <span th:text="${games[1]}">0</span>
                <small>(Sets)</small>
            </div>
        </div>

        <!-- Match Info -->
        <div class="match-info">
            <div class="info-row">
                <span class="info-label">
                    <i class="bi bi-people-fill me-1"></i>Đội A
                </span>
                <span class="info-value" th:text="${names[0]}">Tên đội A</span>
            </div>
            <div class="info-row">
                <span class="info-label">
                    <i class="bi bi-people-fill me-1"></i>Đội B
                </span>
                <span class="info-value" th:text="${names[1]}">Tên đội B</span>
            </div>
            <div class="info-row">
                <span class="info-label">
                    <i class="bi bi-clock me-1"></i>Thời gian
                </span>
                <span class="info-value" id="matchDuration" th:text="${duration != null ? duration : 'N/A'}">N/A</span>
            </div>
            <div class="info-row">
                <span class="info-label">
                    <i class="bi bi-geo-alt me-1"></i>Sân
                </span>
                <span class="info-value" th:text="${'Sân ' + pin}">Sân PIN</span>
            </div>
        </div>

        <!-- Sets Summary -->
        <div class="sets-summary">
            <div class="sets-title">Chi tiết từng set</div>

            <!-- Set 1 -->
            <div class="set-row" th:if="${gameScores != null and gameScores.length > 0 and gameScores[0] != null}">
                <span class="set-label">Set 1</span>
                <span class="set-score">
                    <span th:text="${gameScores[0][0]}">0</span> -
                    <span th:text="${gameScores[0][1]}">0</span>
                    <span th:if="${gameScores[0][0] > gameScores[0][1]}" th:text="${names[0]}"
                        class="winner-highlight ms-2">A</span>
                    <span th:if="${gameScores[0][1] > gameScores[0][0]}" th:text="${names[1]}"
                        class="winner-highlight ms-2">B</span>
                </span>
            </div>

            <!-- Set 2 -->
            <div class="set-row" th:if="${gameScores != null and gameScores.length > 1 and gameScores[1] != null}">
                <span class="set-label">Set 2</span>
                <span class="set-score">
                    <span th:text="${gameScores[1][0]}">0</span> -
                    <span th:text="${gameScores[1][1]}">0</span>
                    <span th:if="${gameScores[1][0] > gameScores[1][1]}" th:text="${names[0]}"
                        class="winner-highlight ms-2">A</span>
                    <span th:if="${gameScores[1][1] > gameScores[1][0]}" th:text="${names[1]}"
                        class="winner-highlight ms-2">B</span>
                </span>
            </div>

            <!-- Set 3 -->
            <div class="set-row" th:if="${gameScores != null and gameScores.length > 2 and gameScores[2] != null}">
                <span class="set-label">Set 3</span>
                <span class="set-score">
                    <span th:text="${gameScores[2][0]}">0</span> -
                    <span th:text="${gameScores[2][1]}">0</span>
                    <span th:if="${gameScores[2][0] > gameScores[2][1]}" th:text="${names[0]}"
                        class="winner-highlight ms-2">A</span>
                    <span th:if="${gameScores[2][1] > gameScores[2][0]}" th:text="${names[1]}"
                        class="winner-highlight ms-2">B</span>
                </span>
            </div>

            <!-- Current set (if match not finished) -->
            <div class="set-row" th:unless="${matchFinished}">
                <span class="set-label" th:text="${'Set ' + gameNumber + ' (đang diễn ra)'}">Set hiện tại</span>
                <span class="set-score">
                    <span th:text="${score[0]}">0</span> - <span th:text="${score[1]}">0</span>
                </span>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <a th:href="${'/scoreboard/' + pin}" class="btn-action btn-back">
                <i class="bi bi-arrow-left"></i>
                <span>Quay lại sân</span>
            </a>
            <a href="/pin" class="btn-action btn-new">
                <i class="bi bi-plus-circle"></i>
                <span>Trận mới</span>
            </a>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Result Page JS -->
    <script src="/js/scoreboard/result.js" th:src="@{/js/scoreboard/result.js}"></script>
</body>

</html>